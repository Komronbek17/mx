<script setup>
import { ref } from "vue";

const props = defineProps({
  percent: Number,
  index: Number,
  activeIndex: Number,
});

console.log(props.index === 0, "props.index === 0");
console.log(props.activeIndex, "props.activeIndex");
console.log(props.activeIndex !== 0, "props.activeIndex !== 0");
const iconFirstLevel =
  props.percent !== 100 && !!(props.index === 0) && props.activeIndex !== 0;
const iconSecondLevel =
  props.percent !== 100 && props.index === 1 && props.activeIndex !== 1;
const iconThirdLevel =
  props.percent !== 100 && props.index === 2 && props.activeIndex !== 2;

console.log(props.index, props.activeIndex);
console.log(iconFirstLevel, "iconFirstLevel");
console.log(iconSecondLevel, "iconSecondLevel");
console.log(iconThirdLevel, "iconThirdLevel");
</script>

<template>
  <div class="progress-star">
    <p
      class="progress-star__index"
      :class="
        props.activeIndex === props.index && props.percent !== 100
          ? 'progress-star__index-default'
          : 'progress-star__index-active'
      "
    >
      {{ index }}
    </p>
    <div class="progress-star__icon">
      <svg
        v-if="iconFirstLevel"
        width="36"
        height="35"
        viewBox="0 0 36 35"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M34.5629 16.0469L27.5004 21.9219L29.7348 31C29.8375 31.3805 29.8516 31.7795 29.7761 32.1664C29.7005 32.5532 29.5372 32.9176 29.2988 33.2314C29.0604 33.5453 28.7531 33.8003 28.4008 33.9769C28.0484 34.1535 27.6602 34.2469 27.266 34.25C26.7833 34.2478 26.3114 34.1068 25.9067 33.8438L18.016 28.8594H17.9848L10.6567 33.5C10.1833 33.7987 9.63153 33.9493 9.07205 33.9326C8.51256 33.9159 7.97078 33.7326 7.51605 33.4062C7.04756 33.0644 6.69273 32.5896 6.49768 32.0434C6.30262 31.4972 6.27636 30.905 6.4223 30.3438L8.53167 22.0469L1.43792 16.0469C1.03546 15.7106 0.742966 15.2614 0.598148 14.7574C0.45333 14.2533 0.46283 13.7174 0.625422 13.2188C0.783754 12.7277 1.08581 12.2954 1.49251 11.9778C1.89921 11.6602 2.39184 11.472 2.90667 11.4375L12.1254 10.8438L15.6254 2.125C15.8131 1.64751 16.1398 1.23735 16.5633 0.947631C16.9867 0.657913 17.4874 0.501973 18.0004 0.5C18.5135 0.501973 19.0141 0.657913 19.4376 0.947631C19.861 1.23735 20.1877 1.64751 20.3754 2.125L23.8129 10.7969L33.0942 11.4375C33.6096 11.4699 34.1033 11.6574 34.5104 11.9752C34.9174 12.2931 35.219 12.7265 35.3754 13.2188C35.538 13.7174 35.5475 14.2533 35.4027 14.7574C35.2579 15.2614 34.9654 15.7106 34.5629 16.0469Z"
          fill="url(#paint0_linear_3452_9321)"
        />
        <defs>
          <linearGradient
            id="paint0_linear_3452_9321"
            x1="-7.69306"
            y1="-5.52678"
            x2="52.22"
            y2="13.854"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#4ADAFF" />
            <stop offset="1" stop-color="#0062CA" />
          </linearGradient>
        </defs>
      </svg>

      <svg
        v-else-if="iconSecondLevel"
        width="37"
        height="35"
        viewBox="0 0 37 35"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M35.0629 16.0469L28.0004 21.9219L30.2348 31C30.3375 31.3805 30.3516 31.7795 30.2761 32.1664C30.2005 32.5532 30.0372 32.9176 29.7988 33.2314C29.5604 33.5453 29.2531 33.8003 28.9008 33.9769C28.5484 34.1535 28.1602 34.2469 27.766 34.25C27.2833 34.2478 26.8114 34.1068 26.4067 33.8438L18.516 28.8594H18.4848L11.1567 33.5C10.6833 33.7987 10.1315 33.9493 9.57205 33.9326C9.01256 33.9159 8.47078 33.7326 8.01605 33.4062C7.54756 33.0644 7.19273 32.5896 6.99768 32.0434C6.80262 31.4972 6.77636 30.905 6.9223 30.3438L9.03167 22.0469L1.93792 16.0469C1.53546 15.7106 1.24297 15.2614 1.09815 14.7574C0.95333 14.2533 0.96283 13.7174 1.12542 13.2188C1.28375 12.7277 1.58581 12.2954 1.99251 11.9778C2.39921 11.6602 2.89184 11.472 3.40667 11.4375L12.6254 10.8438L16.1254 2.125C16.3131 1.64751 16.6398 1.23735 17.0633 0.947631C17.4867 0.657913 17.9874 0.501973 18.5004 0.5C19.0135 0.501973 19.5141 0.657913 19.9376 0.947631C20.361 1.23735 20.6877 1.64751 20.8754 2.125L24.3129 10.7969L33.5942 11.4375C34.1096 11.4699 34.6033 11.6574 35.0104 11.9752C35.4174 12.2931 35.719 12.7265 35.8754 13.2188C36.038 13.7174 36.0475 14.2533 35.9027 14.7574C35.7579 15.2614 35.4654 15.7106 35.0629 16.0469Z"
          fill="url(#paint0_linear_3395_11406)"
        />
        <defs>
          <linearGradient
            id="paint0_linear_3395_11406"
            x1="0.996094"
            y1="0.5"
            x2="40.7797"
            y2="27.1115"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#F2D207" />
            <stop offset="1" stop-color="#FFA329" />
          </linearGradient>
        </defs>
      </svg>

      <svg
        v-else-if="iconThirdLevel"
        width="26"
        height="35"
        viewBox="0 0 26 35"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M35.0629 16.0469L28.0004 21.9219L30.2348 31C30.3375 31.3805 30.3516 31.7795 30.2761 32.1664C30.2005 32.5532 30.0372 32.9176 29.7988 33.2314C29.5604 33.5453 29.2531 33.8003 28.9008 33.9769C28.5484 34.1535 28.1602 34.2469 27.766 34.25C27.2833 34.2478 26.8114 34.1068 26.4067 33.8438L18.516 28.8594H18.4848L11.1567 33.5C10.6833 33.7987 10.1315 33.9493 9.57205 33.9326C9.01256 33.9159 8.47078 33.7326 8.01605 33.4062C7.54756 33.0644 7.19273 32.5896 6.99768 32.0434C6.80262 31.4972 6.77636 30.905 6.9223 30.3438L9.03167 22.0469L1.93792 16.0469C1.53546 15.7106 1.24297 15.2614 1.09815 14.7574C0.95333 14.2533 0.96283 13.7174 1.12542 13.2188C1.28375 12.7277 1.58581 12.2954 1.99251 11.9778C2.39921 11.6602 2.89184 11.472 3.40667 11.4375L12.6254 10.8438L16.1254 2.125C16.3131 1.64751 16.6398 1.23735 17.0633 0.947631C17.4867 0.657913 17.9874 0.501973 18.5004 0.5C19.0135 0.501973 19.5141 0.657913 19.9376 0.947631C20.361 1.23735 20.6877 1.64751 20.8754 2.125L24.3129 10.7969L33.5942 11.4375C34.1096 11.4699 34.6033 11.6574 35.0104 11.9752C35.4174 12.2931 35.719 12.7265 35.8754 13.2188C36.038 13.7174 36.0475 14.2533 35.9027 14.7574C35.7579 15.2614 35.4654 15.7106 35.0629 16.0469Z"
          fill="#00CB6A"
        />
      </svg>

      <svg
        v-else
        width="39"
        height="40"
        viewBox="0 0 39 40"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M37.0629 18.0469L30.0004 23.9219L32.2348 33C32.3375 33.3805 32.3516 33.7795 32.2761 34.1664C32.2005 34.5532 32.0372 34.9176 31.7988 35.2314C31.5603 35.5453 31.2531 35.8003 30.9008 35.9769C30.5484 36.1535 30.1602 36.2469 29.766 36.25C29.2833 36.2478 28.8114 36.1068 28.4067 35.8437L20.516 30.8594H20.4848L13.1567 35.5C12.6833 35.7987 12.1315 35.9493 11.572 35.9326C11.0126 35.9159 10.4708 35.7326 10.016 35.4063C9.54756 35.0644 9.19273 34.5895 8.99768 34.0434C8.80262 33.4972 8.77636 32.905 8.9223 32.3438L11.0317 24.0469L3.93792 18.0469C3.53546 17.7106 3.24297 17.2614 3.09815 16.7574C2.95333 16.2533 2.96283 15.7174 3.12542 15.2188C3.28375 14.7277 3.58581 14.2954 3.99251 13.9778C4.39921 13.6602 4.89184 13.472 5.40667 13.4375L14.6254 12.8437L18.1254 4.125C18.3131 3.64751 18.6398 3.23735 19.0633 2.94763C19.4867 2.65791 19.9874 2.50197 20.5004 2.5C21.0135 2.50197 21.5141 2.65791 21.9376 2.94763C22.361 3.23735 22.6877 3.64751 22.8754 4.125L26.3129 12.7969L35.5942 13.4375C36.1096 13.4699 36.6033 13.6574 37.0104 13.9752C37.4174 14.2931 37.719 14.7265 37.8754 15.2188C38.038 15.7174 38.0475 16.2533 37.9027 16.7574C37.7579 17.2614 37.4654 17.7106 37.0629 18.0469Z"
          fill="#DBDBDB"
        />
        <g clip-path="url(#clip0_127_10)">
          <path
            d="M37.0629 18.0469L30.0004 23.9219L32.2348 33C32.3375 33.3805 32.3516 33.7795 32.2761 34.1664C32.2005 34.5532 32.0372 34.9176 31.7988 35.2314C31.5603 35.5453 31.2531 35.8003 30.9008 35.9769C30.5484 36.1535 30.1602 36.2469 29.766 36.25C29.2833 36.2478 28.8114 36.1068 28.4067 35.8437L20.516 30.8594H20.4848L13.1567 35.5C12.6833 35.7987 12.1315 35.9493 11.572 35.9326C11.0126 35.9159 10.4708 35.7326 10.016 35.4063C9.54756 35.0644 9.19273 34.5895 8.99768 34.0434C8.80262 33.4972 8.77636 32.905 8.9223 32.3438L11.0317 24.0469L3.93792 18.0469C3.53546 17.7106 3.24297 17.2614 3.09815 16.7574C2.95333 16.2533 2.96283 15.7174 3.12542 15.2188C3.28375 14.7277 3.58581 14.2954 3.99251 13.9778C4.39921 13.6602 4.89184 13.472 5.40667 13.4375L14.6254 12.8437L18.1254 4.125C18.3131 3.64751 18.6398 3.23735 19.0633 2.94763C19.4867 2.65791 19.9874 2.50197 20.5004 2.5C21.0135 2.50197 21.5141 2.65791 21.9376 2.94763C22.361 3.23735 22.6877 3.64751 22.8754 4.125L26.3129 12.7969L35.5942 13.4375C36.1096 13.4699 36.6033 13.6574 37.0104 13.9752C37.4174 14.2931 37.719 14.7265 37.8754 15.2188C38.038 15.7174 38.0475 16.2533 37.9027 16.7574C37.7579 17.2614 37.4654 17.7106 37.0629 18.0469Z"
            fill="white"
          />
        </g>
        <defs>
          <clipPath id="clip0_127_10">
            <rect :width="props.percent + 30" height="40" fill="none" />
          </clipPath>
        </defs>
      </svg>
    </div>
  </div>
</template>

<style lang="scss" src="./progress-star.scss" />
